<!-- =========================
     Contact Details Card
     ========================= -->

<div class="glass-card rounded-2xl p-6 space-y-4">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center">
        <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
          />
        </svg>
      </div>
      <h3 class="text-sm font-semibold text-white">Kontaktdaten</h3>
    </div>

    <!-- Edit Controls -->
    <div class="flex items-center gap-2">
      @if (isEditing()) {
        <button
          (click)="cancelEdit()"
          class="px-3 py-1.5 rounded-lg text-xs font-medium bg-slate-700/50 text-slate-300 hover:bg-slate-700 transition-colors"
        >
          Abbrechen
        </button>
        <button
          (click)="toggleEdit()"
          class="px-3 py-1.5 rounded-lg text-xs font-medium bg-blue-500 text-white hover:bg-blue-600 transition-colors flex items-center gap-1.5"
        >
          <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          Speichern
        </button>
      } @else {
        <button
          (click)="toggleEdit()"
          class="px-3 py-1.5 rounded-lg text-xs font-medium bg-slate-700/50 text-slate-300 hover:bg-slate-700 transition-colors flex items-center gap-1.5"
        >
          <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
            />
          </svg>
          Bearbeiten
        </button>
      }
    </div>
  </div>

  <div class="space-y-4">
    <!-- =========================
         Email
         ========================= -->
    <div class="group">
      <div class="text-xs text-slate-500 mb-1">E-Mail</div>

      @if (isEditing()) {
        <input
          type="email"
          [(ngModel)]="editEmail"
          class="w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-sm text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500"
          placeholder="email@beispiel.de"
        />
      } @else {
        @if (email()) {
          <a
            [href]="'mailto:' + email()"
            class="text-sm text-slate-300 hover:text-blue-400 transition-colors flex items-center gap-2"
          >
            {{ email() }}
            <svg class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
              />
            </svg>
          </a>
        } @else {
          <p class="text-sm text-slate-500">-</p>
        }
      }
    </div>

    <!-- =========================
         Phone
         ========================= -->
    <div class="group">
      <div class="text-xs text-slate-500 mb-1">Telefon</div>

      @if (isEditing()) {
        <input
          type="tel"
          [(ngModel)]="editPhone"
          class="w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-sm text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500"
          placeholder="+49 123 456789"
        />
      } @else {
        @if (phone()) {
          <a
            [href]="'tel:' + phone()"
            class="text-sm text-slate-300 hover:text-blue-400 transition-colors flex items-center gap-2"
          >
            {{ phone() }}
            <svg class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
              />
            </svg>
          </a>
        } @else {
          <p class="text-sm text-slate-500">-</p>
        }
      }
    </div>

    <!-- =========================
         Address
         ========================= -->
    <div>
      <div class="text-xs text-slate-500 mb-1">Adresse</div>

      @if (isEditing()) {
        <div class="space-y-2">
          <input
            type="text"
            [(ngModel)]="editAddressLine1"
            class="w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-sm text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500"
            placeholder="StraÃŸe und Hausnummer"
          />
          <input
            type="text"
            [(ngModel)]="editAddressLine2"
            class="w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-sm text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500"
            placeholder="PLZ und Stadt"
          />
        </div>
      } @else {
        @if (customer()) {
          <div class="text-sm text-slate-300 leading-relaxed">
            <p>{{ addressLine1() }}</p>
            <p>{{ addressLine2() }}</p>
          </div>
        } @else {
          <div class="skeleton h-4 w-full rounded mb-1"></div>
          <div class="skeleton h-4 w-3/4 rounded"></div>
        }
      }
    </div>

    <!-- =========================
         License Plates
         ========================= -->
    @if (hasLicensePlates()) {
      <div>
        <div class="text-xs text-slate-500 mb-2">Kennzeichen</div>
        <div class="flex flex-wrap gap-2">
          @for (plate of licensePlates(); track plate) {
            <span
              class="px-3 py-1.5 rounded-lg text-xs font-mono font-bold bg-linear-to-r from-yellow-400 to-yellow-300 text-slate-900 border-2 border-slate-900 shadow-lg"
            >
              {{ plate }}
            </span>
          }
        </div>
      </div>
    }

    <!-- =========================
         Policy Numbers
         ========================= -->
    @if (hasPolicyNumbers()) {
      <div>
        <div class="text-xs text-slate-500 mb-2">Versicherungsschein-Nummern</div>
        <div class="flex flex-wrap gap-2">
          @for (num of policyNumbers(); track num) {
            <span
              class="px-3 py-1.5 rounded-lg text-xs font-mono font-medium bg-indigo-500/10 text-indigo-300 border border-indigo-500/30"
            >
              {{ num }}
            </span>
          }
        </div>
      </div>
    }
  </div>
</div>