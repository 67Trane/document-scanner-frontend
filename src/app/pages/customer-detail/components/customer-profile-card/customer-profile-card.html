<!-- =========================
     Customer Profile Card
     ========================= -->

<div class="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 p-6 space-y-6 hover:shadow-xl transition-all duration-300">
  <div class="flex items-start gap-4">
    <div class="relative">
      <div
        class="w-16 h-16 rounded-2xl bg-linear-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center text-2xl font-bold text-white shadow-lg shadow-blue-500/30"
      >
        @if (customer()) {
          {{ customer()?.first_name?.[0]?.toUpperCase() }}{{ customer()?.last_name?.[0]?.toUpperCase() }}
        } @else {
          <div class="w-8 h-8 bg-slate-300/20 dark:bg-slate-700/20 rounded animate-pulse"></div>
        }
      </div>

      @if (customer()?.active_status === "aktiv") {
        <div
          class="absolute -bottom-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full border-2 border-white dark:border-slate-800 shadow-sm"
        >
          <span class="absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-75"></span>
        </div>
      }
    </div>

    <div class="flex-1 min-w-0">
      @if (customer()) {
        <h1 class="text-xl font-bold text-slate-900 dark:text-white mb-1">
          {{ customer()?.first_name | titlecase }} {{ customer()?.last_name | titlecase }}
        </h1>
        <p class="text-sm text-slate-600 dark:text-slate-400 font-mono">#{{ customer()?.customer_number }}</p>
      } @else {
        <div class="h-6 w-32 bg-slate-200 dark:bg-slate-700 rounded animate-pulse mb-2"></div>
        <div class="h-4 w-24 bg-slate-200 dark:bg-slate-700 rounded animate-pulse"></div>
      }

      <div class="flex flex-wrap gap-2 mt-3">
        @if (customer()?.active_status === "aktiv") {
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-emerald-500/10 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border border-emerald-500/20 dark:border-emerald-500/30"
          >
            <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
            Aktiv
          </span>
        } @else {
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-red-500/10 dark:bg-red-500/20 text-red-700 dark:text-red-400 border border-red-500/20 dark:border-red-500/30"
          >
            <span class="w-1.5 h-1.5 rounded-full bg-red-500"></span>
            Ruhend
          </span>
        }
      </div>
    </div>
  </div>

  <!-- =========================
       Quick Stats
       ========================= -->
  <div class="grid grid-cols-3 gap-3 pt-4 border-t border-slate-200/50 dark:border-slate-700/50">
    <div class="text-center">
      <div class="text-2xl font-bold text-slate-900 dark:text-white">{{ contractsCount() }}</div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Vertr√§ge</div>
    </div>

    <div class="text-center">
      <div class="text-2xl font-bold text-slate-900 dark:text-white">{{ vehiclesCount() }}</div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Fahrzeuge</div>
    </div>

    <div class="text-center">
      <div class="text-2xl font-bold text-emerald-600 dark:text-emerald-400">{{ policiesCount() }}</div>
      <div class="text-xs text-slate-600 dark:text-slate-400 mt-1">Policen</div>
    </div>
  </div>
</div>