<!-- =========================
     Header with Breadcrumb
     ========================= -->
<app-customer-header [fullName]="fullName()"></app-customer-header>


<div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

  <!-- Linke Sidebar - Kundeninfo -->
  <aside class="lg:col-span-4 xl:col-span-3 space-y-6">

    <!-- =========================
     Customer Profile Card
     ========================= -->
    <app-customer-profile-card [customer]="customer()" [contractsCount]="alldocuments().length"
      [vehiclesCount]="licensePlates().length" [policiesCount]="policyNumbers().length"></app-customer-profile-card>


    <!-- =========================
     Contact Details Card
     ========================= -->
    <app-customer-contact-card [customer]="customer()" [email]="email()" [phone]="phone()"
      [addressLine1]="addressLine1()" [addressLine2]="addressLine2()" [licensePlates]="licensePlates()"
      [policyNumbers]="policyNumbers()"></app-customer-contact-card>

  </aside>



  <!-- Hauptbereich - VertrÃ¤ge & Dokumente -->
  <div class="lg:col-span-8 xl:col-span-9 space-y-6">
    <!-- =========================
     Notes Panel
     ========================= -->
    <app-customer-notes-panel [notesDraft]="notesDraft()" [canSave]="canSaveNotes()"
      [saveState]="notesSaveState()" (notesDraftChange)="notesDraft.set($event)" (save)="saveNotes()"></app-customer-notes-panel>


    <!-- =========================
     PDF Viewer
     ========================= -->
    <app-customer-pdf-viewer [src]="viewerSrc() ?? undefined" [document]="document()"
      (openOriginal)="openContract(document()!)" (download)="downloadCurrentPdf()"></app-customer-pdf-viewer>

    <!-- =========================
     Contracts List
     ========================= -->
    <app-customer-contracts-list [documents]="alldocuments()"
      (selectContract)="openContractPreview($event)"></app-customer-contracts-list>

  </div>
</div>